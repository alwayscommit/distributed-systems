user  nginx;

events {
    worker_connections   2000;
}
http {
        server {
              listen 4000;

              proxy_next_upstream error timeout http_502;

              location / {
                proxy_pass http://api:8080;

                keepalive_requests 32;
                proxy_http_version 1.1;
                proxy_set_header Connection ""; 
              }
        }
}